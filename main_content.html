<main style="max-width: 100%; overflow-x: hidden;">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.0"></script>
    <script src="charts.js"></script>
    <section id="financialSummary">
        <div id="leftContent">
            <p>
                <strong><span id="revenueSubtotalText">Total:</span></strong> $<span id="revenueSubtotal">0.00</span>
                <strong> | <span id="expensesSubtotalText">Total:</span></strong> $<span id="expensesSubtotal">0.00</span>
                <strong> | Net Balance:</strong> $<span id="totalBalance">0.00</span>
            </p>
            <div id="expensesSection"> <!-- Changed from section to div -->
                <h2>Expenses</h2>
                <div class="dropdown-container"> <!-- Updated -->
                    <select id="expenseTypeFilter"> <!-- Moved to the left of 'Search by name...' -->
                        <option value="">All Types</option>
                        <option value="Registration">Registration</option>
                        <option value="Sponsorship">Sponsorship</option>
                        <option value="Credit Card">Credit Card</option>
                        <option value="Auction Fees">Auction Fees</option>
                        <option value="Donation">Donation</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" id="expenseSearch" placeholder="Search by name, receipt, or contact" aria-label="Search Expenses"> <!-- Moved to the left of 'Add Expense' -->
                    <button id="addExpenseBtn" class="tooltip-button">
                        Add Expense
                        <span class="tooltip-text">Add an expense to have a better overview of your finances</span>
                    </button>
                    <button id="exportExpenseCsvBtn" class="tooltip-button">
                        Export Expenses
                        <span class="tooltip-text">Export all expense data to CSV</span>
                    </button>
                </div>
                <table id="expenseTable">
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Payment</th>
                            <th>Name</th>
                            <!-- <th class="expense-contact-column">Contact</th> --> <!-- Removed Contact column header -->
                            <th>Subtotal</th>
                            <th>Fee</th>
                            <th>Notes</th>
                            <th>Status</th>
                            <th>Actions</th> <!-- Ensure this header exists and aligns correctly -->
                        </tr>
                    </thead>
                    <tbody id="expenseTableBody">
                        <!-- Default Credit Card Entry -->
                        <tr class="paid">
                            <td>Credit Card</td>
                            <td>Auto</td>
                            <td>Auto</td>
                            <td>Auto</td>
                            <!-- <td class="expense-contact-column">Auto</td> --> <!-- Omitted Contact cell -->
                            <td>$1.00</td>
                            <td>$1.00</td>
                            <td>2.9% + $0.30/transaction</td>
                            <td class="status">Paid</td>
                            <td>
                                <div class="dropdown">
                                    <button class="dropbtn">Actions</button>
                                    <div class="dropdown-content">
                                        <a href="#" class="markAsPaid">Mark as Paid</a>
                                        <a href="#" class="markAsUnpaid">Mark as Unpaid</a>
                                        <a href="#" class="editBtn">Edit</a>
                                        <a href="#" class="deleteBtn">Delete</a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div> <!-- Changed from section to div -->
        </div>
        <div id="chartsContainer">
            <button id="exportExcelBtn" class="tooltip-button">
                Export All Finances
                <span class="tooltip-text">Export all financial data to Excel</span>
            </button> <!-- Moved button here -->
            <div id="chartsSection">
                <h2>Charts</h2>
                <canvas id="myChart"></canvas>
                <div class="chart-controls">
                    <div class="control-group">
                        <label for="chartType">Chart Type:</label>
                        <select id="chartType">
                            <option value="bar">Bar</option>
                            <option value="pie">Pie</option>
                            <option value="line">Line</option>
                            <option value="doughnut">Doughnut</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="filterType">Filter By Type:</label>
                        <select id="filterType">
                            <option value="all">All</option>
                            <option value="Registration">Registration</option>
                            <option value="Sponsorship">Sponsorship</option>
                            <option value="Donation">Donation</option>
                            <option value="Auction">Auction</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="revenueSection">
        <h2>Revenue</h2><p>Each purchase is listed separately, even if multiple purchases are made on the same invoice.  Use the Export Revenue by invoice option for compressed purchases.</p>
        <div class="dropdown-container"> <!-- Updated -->
            <select id="revenueTypeFilter"> <!-- Moved to the left of 'Search by name...' -->
                <option value="">All Types</option>
                <option value="Registration">Registration</option>
                <option value="Sponsorship">Sponsorship</option>
                <option value="Donation">Donation</option>
                <option value="Auction">Auction</option>
                <option value="Other">Other</option>
            </select>
            <input type="text" id="revenueSearch" placeholder="Search by Purchase Type, Name, Receipt, Contact or Note" aria-label="Search Revenue"> <!-- Moved to the left of 'Add Revenue' -->
            <button id="addRevenueBtn" class="tooltip-button">
                Add Revenue
                <span class="tooltip-text">Add a revenue entry to track income</span>
            </button>
            <button id="exportRevenueCsvBtn" class="tooltip-button">
                Export Revenue by purchase
                <span class="tooltip-text">Export revenue with each purchase separately listed</span>
            </button>
            <button id="exportRevenueByInvoiceCsvBtn" class="tooltip-button">
                Export Revenue by invoice
                <span class="tooltip-text">Export revenue by invoice/receipt number</span>
            </button>
        </div>
        <table id="revenueTable">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Purchase Type</th>
                    <th>Date</th>
                    <th>Receipt #</th>
                    <th>Payment</th>
                    <th>Name</th>
                    <th>Contact</th>
                    <th>Subtotal</th>
                    <th>Fee</th>
                    <th>Notes</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="revenueTableBody">  

            </tbody>
        </table>
    </section>
    <!-- Ensure both 'Add Expense' and 'Edit Expense' modals are loaded -->
    <div id="modals">
        <!-- Add Expense Modal -->
        <div id="addExpenseModal" class="modal">
            <div class="modal-content">
                <!-- ...Add Expense Form as updated above... -->
            </div>
        </div>

        <!-- Edit Expense Modal -->
        <div id="editExpenseModal" class="modal">
            <div class="modal-content">
                <!-- ...Edit Expense Form as updated above... -->
            </div>
        </div>
    </div>
    <!-- Ensure scripts are loaded after all elements are present -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.0"></script>
    <script src="charts.js"></script>
    <script src="common.js"></script>
    <script src="forms.js"></script>
    <script src="modals.js"></script>
    <script src="main.js"></script>
</main>
